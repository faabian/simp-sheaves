% Emacs mode: -*-latex-*-

\chapter{Simpliziale Mengen}
\label{ch:simp-sets}

Simpliziale Mengen sind eine Verallgemeinerung von
Simplizialkomplexen, die näher an verwandten kategorientheoretischen
Konzepten stehen. Sie erlauben das mehrfache Verwenden von Simplizes
in der geometrischen Realisierung und statten Kanten und höhere
Simplizes mit einer Orientierung aus. Während Simplizialkomplexe
einfache ungerichtete Graphen auf höhere Dimensionen verallgemeinern,
verallgemeinern simpliziale Mengen gerichtete Multigraphen. Die
geometrische Realisierung simplizialer Mengen ermöglicht einen
kombinatorischen Zugang zur Topologie und kann als Ausgangspunkt der
Homotopietheorie gewählt werden (vgl. \cite{GJ}). In diesem Kapitel
werden wir simpliziale Mengen, ihre geometrische Realisierung und
deren elementare Eigenschaften einführen.

\section{Definition simplizialer Mengen}

Wir betrachten die Menge $\Delta$ der nichtleeren endlichen
Ordinalzahlen. Ihre Elemente sind von der Form $\{0, 1, \dots, n\}$
für ein $n \in \N$, welche wir kurz mit $[n]$ bezeichnen werden. Wir
verstehen diese Mengen $[n]$ als angeordnete Mengen.

\begin{defn} \label{def:delta}
  Die \emph{Simplex-Kategorie} $\Delta$ ist die Kategorie der
  endlichen nichtleeren Ordinalzahlen versehen mit monotonen
  Abbildungen als Morphismen.

  Ist $C$ eine Kategorie, so heißt eine Prägarbe auf $\Delta$ mit
  Werten in $C$ (d. h. ein Funktor $\Delta\op \to C$) ein
  \emph{simpliziales Objekt} in $C$.
\end{defn}
Wir notieren die Funktorkategorien simplizialer Objekte in $C$ durch
$\s C = [\Delta\op, C]$. Opponiert heißt ein Funktor $\Delta \to C$
ein kosimpliziales Objekt in $C$.

Für $X \in \s C$ ein simpliziales Objekt notieren wir kurz $X_n :=
X([n])$ und für eine monotone Abbildung $f: [m] \to [n]$ auch $f^* =
X(f)$.

Die monotonen Abbildungen $[m] \to [n]$ werden von zwei besonders
einfachen Klassen monotoner Abbildungen erzeugt: von den
\emph{Randabbildungen}, den eindeutigen Injektionen $d_i^n: [n - 1]
\to [n]$, die $i \in \{0, \dots, n\}$ nicht treffen, und den
\emph{Degenerationsabbildungen}, den eindeutigen Surjektionen $s_i^n:
     [n + 1] \to [n]$, für die nur $i \in \{0, \dots n\}$ nicht genau
     ein Urbild hat.
 
\begin{lemma}[\cite{GM}, I.2, ex. 1] \label{face-gen}
  \begin{enumerate}[label=(\roman*)] \item \label{itm:face-gen-rel}
    Die Rand- und Degenerationsabbildungen er\-fül\-len die Relationen
    \begin{alignat*}{2}
      d_j^{n+1} d_i^n &= d_i^{n+1} d_{j-1}^n \qquad &&\text{für} \quad i < j, \\
      s_j^n s_i^{n+1} &= s_i^n s_{j+1}^{n+1} &&\text{für} \quad i \leq j, \\
      s_j^{n-1} d_i^n &=
      \begin{cases}
        d_i^{n-1} s_{j-1}^{n-2} & \text{für} \quad i < j, \\
        \id_{[n-1]} & \text{für} \quad i = j \text{ oder } i = j+1, \\
        d_{i-1}^{n-1} s_j^{n-2} & \text{für} \quad i > j + 1.
    \end{cases}
  \end{alignat*}
   \item \label{itm:face-gen-form} Sei $f: [m] \to [n]$ monoton. Dann
     hat $f$ eine eindeutige Darstellung
  \[ f = d_{i_1}^n \dots d_{i_s}^{n-s+1} s_{j_t}^{m-t} \dots s_{j_1}^{m-1} \]
  mit $n \geq i_1 > \dots > i_s \geq 0$, $m > j_1 > \dots > j_t \geq
  0$ und $n = m-t+s$.
\item \label{itm:face-gen-cat} Die vom Köcher der endlichen
  nichtleeren Ordinalzahlen mit den Rand- und Korandabbildungen und
  den angegebenen Relationen auf den Morphismenmengen erzeugte
  Pfadkategorie ist isomorph zu $\Delta$.
  \end{enumerate}
\end{lemma}
\begin{proof}
  \begin{enumerate}[label=(\roman*)]
  \item Durch Bildchen Zeichnen oder explizites Nachrechnen: Wir
    werten beide Abbildungen simultan auf allen Elementen aus und
    erhalten zum Beispiel für die erste Aussage:
  \begin{align*}
  &(0, 1, \dots, i-1, i, i+1, \cdots, j-2, j-1, j, \cdots, n-1) \\
  \xmapsto{d_i^n} \quad
  &(0, 1, \cdots, i-1, i+1, i+2, \cdots, j-1, j, j+1, \cdots, n) \\
  \xmapsto{d_j^{n+1}} \quad
  &(0, 1, \cdots, i-1, i+1, i+2, \cdots, j-1, j+1, j+2, \cdots, n+1)
  \end{align*}
  sowie
  \begin{align*}
  &(0, 1, \cdots, i-1, i, i+1, \cdots, j-2, j-1, j, \cdots, n-1) \\
  \xmapsto{d_{j-1}^n} \quad
  &(0, 1, \cdots, i-1, i, i+1, \cdots, j-2, j, j+1, \cdots, n) \\
  \xmapsto{d_i^{n+1}} \quad
  &(0, 1, \cdots, i-1, i+1, i+2, \cdots, j-1, j+1, j+2, \cdots, n+1).
  \end{align*}

  \item In einer solchen Darstellung gibt $m - t$ die Anzahl der
  Funktionswerte der Abbildung an, die $j_k$ beschreiben die Partition
  von $(0, \cdots, m)$ in zusammenhängende Abschnitte mit demselben
  Funktionswert und die $i_k$ bestimmen die Funktionswerte selbst.

  \item Jeder Morphismus in der Pfadkategorie, d. h. jedes Tupel
    komponierbarer Rand- und Degenerationsabbildungen kann mit den
    Relationen aus dem ersten Teil auf eine Form wie in
    \ref{itm:face-gen-form} gebracht werden. Umgekehrt ist nach
    \ref{itm:face-gen-form} jede monotone Abbildung aber auch als ein
    solcher Pfad darstellbar.
\end{enumerate}
\end{proof}

Die Yoneda-Einbettung liefert die einfachsten Beispiele nichttrivialer
simplizialer Mengen:
\begin{defn} \label{def:comb-standard-simplex}
  Die darstellbare simpliziale Menge $\Delta^n := \Delta(\cdot, [n])$
  heißt \emph{Standard-$n$-Simplex}.
\end{defn}
Wir notieren die Yoneda-Einbettung auch durch $r: \Delta \to \s\Ens$.

Ist $X \in \s\Ens$ eine simpliziale Menge, so bezeichnen wir $X_n =
X([n])$ als die Menge der $n$-Simplizes von $X$. Nach dem Yoneda-Lemma
sind die $n$-Simplizes von $X$ gegeben durch
\begin{equation} \label{eq:simp-as-hom}
  X_n \iso \s\Ens(\Delta^n, X).
\end{equation}

Eine simpliziale Menge $X$ lässt sich vollständig durch das System
ihrer Simplizes $\Delta^n \to X$ verstehen. Dazu erklären wir
Slice-Kategorien, einen Spezialfall von Komma-Kategorien.
\begin{defn}
  Sei $r: C \to D$ ein Funktor und $X \in D$ ein Objekt. Dann
  bezeichnet $\slicecat{C}{r}{X}$ die \emph{Slice-Kategorie} der
  Objekte von $C$ über $X$ mittels $r$, deren Objekte Morphismen
  $\pi_c: r\,c \to X$ für $c \in C$ sind mit Morphismen den von $f: c
  \to d$ induzierten Morphismen $r\,f$ mit $\pi_c = \pi_d \circ r\,f$.
\end{defn}
Es handelt sich also um die Kategorie $C$, die mittels $r$ über dem
Objekt $X$ von $D$ aufgefasst wird.

Wir bezeichnen die Slice-Kategorie $\slicecat{\Delta}{r}{X}$ mit der
Yoneda-Einbettung als die \emph{Simplexkategorie} von $X$. Konkret ist
darin ein Objekt ein Morphismus $\Delta^n \to X$ und ein Morphismus
ein Morphismus simplizialer Mengen $\Delta^n \to \Delta^m$ über $X$.
\begin{lemma}[\cite{GJ}, I.2.1] \label{sset-col}
  Sei $X \in \s\Ens$ eine simpliziale Menge. Dann gilt
  \[ X \iso \col_{\Delta^n \to X} \Delta^n, \]
  mit dem Kolimes über die Simplexkategorie von $X$.
\end{lemma}
\begin{proof}
  Bezeichne $K$ obigen Kolimes. Das System, über das der Kolimes
  gebildet wird, sichert uns nach der universellen Eigenschaft des
  Kolimes einen Morphismus $K \to X$. Wir müssen zeigen, dass dieser
  Bijektionen auf den $n$-Simplizes induziert. Tatsächlich definiert
  ein $n$-Simplex $\Delta^n \to K$ durch Nachschalten von $K \to X$
  einen $n$-Simplex in $X$. Umgekehrt hat jeder $n$-Simplex $\Delta^n
  \to X$ eine natürliche Abbildung in den Kolimes. Diese Zuordnungen
  sind zueinander invers.
\end{proof}
Es handelt sich um ein reines ``\emph{abstract nonsense}''-Argument,
dessen allgemeine Form wir ebenfalls festhalten. Der Beweis überträgt
sich wörtlich, wieder mit der Slice-Kategorie über die
Yoneda-Einbettung.
\begin{prop}[\cite{GJ}, I.2.1] \label{presheaf-colimit-representable}
  Sei $C$ eine kleine Kategorie und $F: C \to \Ens$ ein Funktor. Dann
  ist $F$ ein Kolimes über darstellbare Funktoren $C(X, \cdot)$.
\end{prop}
\begin{bem}
  Dies folgt später auch sofort aus der Dichteformel für Koenden
  \ref{coend-density}, der Beschreibung von Koenden als Kolimites
  \ref{coend-col} und der Beschreibung von Produkten von Mengen als
  Koprodukte \ref{ens-tensored}.
\end{bem}
Das Motto zur Arbeit mit simplizialen Mengen ist daher, Aussagen, die
für die Standardsimplizes gelten, durch ``Kostetigkeit'' (Vertauschen
mit Kolimites) auf simpliziale Mengen zu übertragen.

\section{Der kosimpliziale Raum der Standardsimplizes}

Die geometrische Realisierung einer simplizialen Menge soll sich mit
geeigneten Identifikationen aus den geometrischen Realisierungen von
Standard-$n$-Simplizes zusammensetzen. Diese definieren wir als die
abgeschlossenen geometrischen Standard-$n$-Simplizes
\[ |\Delta^n| = \set{(x_0, \cdots, x_n) \in \R^{n+1}}
   {0 \leq x_i \leq 1, \sum_{i=0}^n x_i = 1}. \]
Es wird sich später herausstellen, dass es sich hierbei tatsächlich um
die geometrische Realisierung der kombinatorischen
Standard-$n$-Simplizes $\Delta^n$ handelt, dies rechtfertigt die
Notation.

Ein Morphismus $f: [m] \to [n]$ induziert eine stetige Abbildung $|f|:
|\Delta^m| \to |\Delta^n|$ auf den zugehörigen Simplizes. Nach
\ref{face-gen} reicht es, diese für Rand- und Degenerationsabbildungen
\begin{alignat*}{2}
  |d_i^n|: |\Delta^{n-1}| &\to |\Delta^n| \qquad && \text{für } 0 \leq i \leq n, \\
  |s_i^n|: |\Delta^{n+1}| &\to |\Delta^n| && \text{für } 0 \leq i \leq n
\end{alignat*}
anzugeben. Für die Randabbildungen $|d_i^n|$ handelt es sich dabei um
die Inklusion der $i$-ten Kante, d. h. in Koordinaten das Einfügen
einer Null an der $i$-ten Stelle, für die Degenerationen $s_i^n$ um
den Kollaps der $i$-ten direkten Kante, d. h. in Koordinaten die
Ersetzung der $i$-ten und ihrer darauffolgenden Koordinate durch ihre
Summe. In Formeln:
\begin{align} \label{eq:cosimp-space}
  |d_i^n|(x_0, \cdots, x_{n-1})
  &= (x_0, \cdots, x_{i-1}, 0, x_i, \cdots, x_{n-1}), \\
  |s_i^n|(x_0, \cdots, x_{n+1})
  &= (x_0, \cdots, x_{i-1}, x_i + x_{i+1}, x_{i+2}, \cdots, x_{n+1}).
\end{align}
Wir erhalten einen Funktor
\begin{align*}
  |\Delta|: \Delta &\to \Top, \\
  [n] &\mapsto |\Delta^n|,
\end{align*}
genannt der \emph{kosimpliziale Raum der Standardsimplizes}.

\begin{bem}[\cite{Moer}, III.1.1] \label{gen-intervall}
  Eine alternative Darstellung der geometrischen
  Standard-$n$-Simplizes ist für $I = [0, 1]$ das Einheitsintervall
  mit Endpunkten $0$ und $1$ und der Anordnung $\leq$:
  \[ |\Delta^n| = \set{(x_1, \cdots, x_n) \in I^n}{x_1 \leq \cdots \leq x_n} \]
  mit den Inklusionen von Rändern $|d_i^n|: |\Delta^{n-1}| \to
  |\Delta^n|$, $0 \leq i \leq n$:
  \[ |d_i^n|(x_1, \cdots, x_{n-1}) = 
  \begin{cases}
    (0, x_1, \cdots, x_{n-1}) & i = 0, \\ (x_1, \cdots, x_{n-1}, 1) &
    i = n, \\ (x_1, \cdots, x_i, x_i, \cdots, x_{n-1}) & \text{sonst}
  \end{cases}
  \]
  und Kollapsen von Kanten $|s_i^n|: |\Delta^{n+1}| \to |\Delta^{n}|$,
  $0 \leq i \leq n$, durch Vergessen der $(i+1)$-ten Koordinate
  \[ |s_i^n|(x_1, \cdots x_{n+1}) =
  (x_1, \cdots, x_i, x_{i+2}, \cdots, x_{n+1}).
  \]
  Man beachte, dass die Konstruktion nur einen angeordneten
  topologischen Raum mit Minimum $0$ und Maximum $1$ benötigt, und
  sich auf solche ``verallgemeinerten Intervalle'' überträgt. Der
  Sierpinski-Raum aus einem offenen dichten Punkt $1$ und einem
  abgeschlossenen Punkt $0$ ist etwa ein solches verallgemeinertes
  Intervall.
\end{bem}

\begin{bem} \label{clumsy-real}
  Wie im Fall der Simplizialkomplexe möchten wir neben der
  anschaulich-geometrischen Realisierung durch lokal reelle Räume auch
  noch eine kombinatorischere Realisierung analog zur
  Ordnungstopologie auf dem Simplizialkomplex finden. Nahe liegt es,
  die Standard-$n$-Simplizialkomplexe mit ihrer Ordnungstopologie zu
  verwenden. Wir konstruieren sie als Quotienten der reellen
  Standardsimplizes, werden aber später sehen, dass sie uns bei der
  kombinatorischen Beschreibung von Garben auf simplizialen Mengen
  nicht weiterhelfen.

  Bezeichne $\blacktriangle^n = \Ord \Delta^n$ den
  Standard-$n$-Simplizialkomplex mit der Ordnungstopologie. Der
  Simplexanzeiger $p: |\Delta^n| \to \blacktriangle^n$ ist dann ein
  Morphismus kosimplizialer Räume vom kosimplizialen Raum der
  Standardsimplizes in den \emph{kosimplizialen Raum der
    ordnungstopologischen Standardsimplizes}.
\end{bem}

\section{Geometrische Realisierung simplizialer Mengen}

Wir erklären nun die geometrische Realisierung simplizialer
Mengen. Der Unterschied zur geometrischen Realsierung von
Simplizialkomplexen ist im Wesentlichen die Möglichkeit, Simplizes
wiederzuverwenden und zu degenerieren, was zu Identifikationen in der
geometrischen Realisierung führt. Ein Fall von ``Wiederverwendung''
ist etwa die Realisierung der $S^1$ als 1-Simplex, dessen Endpunkte
übereinstimmen. Degeneration bedeutet, dass niedererdimensionale
Simplizes auch die Rolle höherdimensionaler Simplizes übernehmen
können. Wir können etwa unser Beispiel modifizieren und die $S^n$ als
$n$-Simplex realisieren, bei dem alle niederdimensionalen Kanten in
einem Punkt zusammenfallen.

Die geometrische Realisierung von Standard-$n$-Simplizes haben wir
gerade gesehen. Nun fordern wir, dass sich die Realisierung mit
Kolimites vertrage:
\begin{equation} \label{eq:real-cocont}
  |\col_i X_i| \iso \col_i |X_i|.
\end{equation}
Wenn dies der Fall sein soll, müssen wir die geometrische Realisierung
wegen der Darstellung
\[ X = \col_{\Delta^n \to X} \Delta^n \]
aus \ref{sset-col} wie folgt definieren:
\begin{equation} \label{eq:real-colim}
  |X| := \col_{\Delta^n \to X} |\Delta^n|.
\end{equation}
Debei wird der Kolimes wieder über die Simplexkategorie von $X$
gebildet, nun mit den induzierten stetigen Abbildungen aus Gleichung
\ref{eq:cosimp-space} als Systemmorphismen.

Ein Morphismus simplizialer Mengen $X \to Y$ induziert nun durch
Nachschalten von $X \to Y$ einen Funktor auf den Simplexkategorien
$\Delta \downarrow X \to \Delta \downarrow Y$ und damit auch auf den
Kolimites eine stetige Abbildung $|X| \to |Y|$. Wir erhalten also den
Funktor der geometrischen Realisierung $| \cdot |: \s \Ens \to \Top$.

Unsere Konstruktion erfüllt tatsächlich:
\begin{prop} \label{real-cocont}
  Der Funktor der geometrischen Realisierung simplizialer Mengen $|
  \cdot|$ vertauscht mit beliebigen Kolimites über kleine
  Indexkategorien.
\end{prop}
\begin{proof}
  Zu zeigen ist, dass die Bildung der Simplexkategorie mit Kolimites
  vertauscht, d. h. für einen Funktor $X: I \to \s\Ens$ gilt:
  \[ \slicecat{\Delta}{r}{\col_i X_i} \iso \col_i \slicecat{\Delta}{r}{X_i}. \]
  In der Funktorkategorie $\s\Ens$ erhalten wir Bijektionen zwischen
  den Mengen von $n$-Simplizes
  \[ (\col_i X_i)_n \iso \col_i (X_i)_n. \]
  Diese sind mit den Morphismen in $\Delta$ verträglich.
\end{proof}

Wir können den Kolimes topologischer Räume mittels Koprodukt und
Koegalisator ausschreiben. Dazu verstehen wir die Mengen $X_n$ als
diskrete topologische Räume und erhalten:
\[ |X| \iso \bigg( \coprod_n X_n \times |\Delta^n| \bigg) \big/ \sim \]
mit der Quotiententopologie nach der Äquivalenzrelation, die für alle
monotonen $f: [m] \to [n]$ von 
\[ (x, |f|(p)) \sim (f^* x, p) \]
erzeugt ist.

\section{Sparsame Realisierung durch nichtdegenerierte Simplizes}

Während die Definition simplizialer Mengen und ihrer Realisierung mit
Degenerationsabbildungen wie gesehen von einem formalen Standpunkt aus
einfach ist, ist für die konkrete Arbeit häufig eine explizitere Form
der Realisierung praktischer, die ``unnötige Simplizes von vornherein
weglässt''.
\begin{defn}[\cite{GM}, I.2.9]
  Sei $X \in \s\Ens$ eine simpliziale Menge. Ein Simplex $x \in X_n$
  heißt \emph{degeneriert}, falls es einen Simplex $y \in X_m$ und
  eine surjektive monotone Abbildung $s: [n] \to [m], n > m$ gibt mit
  $x = s^* y$.
\end{defn}
Andernfalls heißt ein Simplex nichtdegeneriert. Für $X \in \s\Ens$
bezeichne $NX_n \subset X_n$ die Menge der nichtdegenerierten
$n$-Simplizes von $X$.
\begin{lemma} \label{degen-repr}
  Sei $X \in \s\Ens$ eine simpliziale Menge und $x \in X_n$ ein
  $n$-Simplex. Dann gibt es eine eindeutige Darstellung $x = s^* y$
  für $y \in NX_m$ einen nichtdegenerierten Simplex von $X$ und $s:
  [n] \to [m]$ eine surjektive monotone Abbildung.
\end{lemma}
\begin{proof}
  Ist $x$ nichtdegeneriert, wähle $y = x$ und $s =
  \id_{[n]}$. Andernfalls gibt es nach Definition ein $y$ und eine
  Surjektion mit der gewünschten Eigenschaft. Diese sind eindeutig
  nach den Relationen aus \ref{face-gen}.
\end{proof}
Wir notieren für eine solche Darstellung $x = s^* y$ auch $y = N(x)$
oder zur Angabe von $s$ auch $y = N_s(x)$.

Wir definieren nun die \emph{sparsame geometrsiche Realisierung} einer
simplizialen Menge $X$ wie folgt:
\[ \| X \| := \bigg( \coprod_n NX_n \times |\Delta^n| \bigg) \big/ \sim_N ,\]
wobei $NX_n$ die diskrete Topologie trägt und die Äquivalenzrelation
erzeugt ist von
\[ (x, |d_i|(p)) \sim_N (N_s(d_i^* x), |s|(p)), \]
mit der eindeutigen Darstellung Degenerierter aus
\ref{degen-repr}. Diese Äquivalenzrelation lässt sich interpretieren
als das Umgehen der mittleren Schritte in der Rechnung
\[ (x, d_i p) \sim (d_i^* x, p) \sim (s^* y, p)
   \sim (y, |s|(p)) \]
mit $y = N_s(d_i^* x)$.
   
\begin{satz}
  Die von der Inklusion
  \[ \coprod_n NX_n \times |\Delta^n| \inj \coprod_n X_n \times |\Delta^n| \]
  induzierte Abbildung $\|X\| \iso |X|$ ist ein Homöomorphismus.
\end{satz}
\begin{proof}
  Die Abbildung existiert und ist stetig nach der universellen
  Eigenschaft topologischer Quotienten, denn die Äquivalenzrelation
  $\sim$ umfasst $\sim_N$. Sie ist bijektiv, denn für die
  dazukommenden Punkte in degenerierten Simplizes $s^* x$ gilt ohnehin
  $(s^* x, p) \sim (x, |s|(p))$. Weiter ist sie offen: Ist $U \open
  \|X\|$ eine offene Teilmenge, so berechnen wir ihr Bild in $|X|$
  durch das Bild ihres Urbilds $V$ in $\coprod_n NX_n \times
  |\Delta^n|$ unter
  \[ \coprod_n NX_n \times |\Delta^n|
  \xhookrightarrow{\qquad} \coprod_n X_n \times |\Delta^n|
  \xrightarrow{\quad\scriptsize{q}\quad} |X|. \]

  Bezeichne $\overline{V}$ den Abschluss von $V \open \coprod_n X_n
  \times |\Delta^n|$ unter $\sim$-Äquivalenz. Es gilt $\overline{V} =
  q^{-1}(q(V))$ und wir müssen nach Definition der Quotiententopologie
  zeigen, dass $\overline{V}$ offen ist. Bezeichne für $x \in NX_n$
  einen nichtdegenerierten Simplex von $X$ den Schnitt von $V$ mit dem
  zu $x$ gehörigen geometrischen Simplex $|\Delta^n|$ mit $V_x$. Bei
  Übergang von $V$ zu $\overline{V}$ kommen dann alle Punkte $(s^* x,
  p)$ mit $(x, |s|(p)) \in U_x$ hinzu. Das Urbild der offenen Menge
  $U_x$ unter dem stetigen $s$-Kollaps $|s|$ ist dann offen.
\end{proof}
Mit diesem Satz kann man sich geometrische Realisierungen gut
veranschaulichen, etwa die versprochenen Darstellungen von $n$-Sphären
als Verklebung eines nichtdegenerierten $n$-Simplex mit einem
nichtdegenerierten $0$-Simplex.
\begin{bsp} \label{ex:clumsy-sphere}
  Die geometrische Realisierung mittels ordnungstopologischer
  Simplizes dieser Standard-Darstellung der $S^n$ als simpliziale
  Menge liefert den Sierpinski-Raum bestehend aus einem offenen
  dichten und einem abgeschlossenen Punkt. Dies zeigt, dass die
  ordnungstopologische Realisierung für unsere Zwecke zu grob ist und
  sich in \ref{sec:simp-set-sk} nicht für die Übertragung der Aussagen
  über schwach konstruierbare Garben auf Simplizialkomplexen eignen
  wird.
\end{bsp}

\section{Iterative Konstruktion durch Pushouts}

Die geometrische Realisierung kann als iteratives Ankleben von
Standardsimplizes an ihre Ränder verstanden werden. Wir zeigen, dass
die geometrische Realisierung einer simplizialen Menge ein CW-Komplex
und insbesondere ein Hausdorffraum ist (\cite{Moer}, III.1).

Bezeichne dazu
\[ \|X^{\leq k}\| =
\bigg( \coprod_{n = 0}^k NX_n \times |\Delta^n| \bigg) \big/ \sim_N \]
die geometrische Realisierung durch nichtdegenerierte Simplizes der
Dimension kleiner oder gleich $k$. Wir erhalten Einbettungen
$\|X^{\leq k}\| \inj \|X^{\leq k+1}\|$ und im Kolimes
\[ \|X\| = \bigcup_k \|X^{\leq k}\|, \]
denn die Äquivalenzrelation von ganz $\|X\|$ führt zu keinen neuen
Identifikationen auf den Teilmengen $\|X^{\leq k}\| \subset \|X\|$.

Wir können die $\|X^{\leq k}\|$ iterativ konstruieren. Betrachte dazu
die stetigen Abbildungen $\pi_k$, die den $k$-dimensionalen Teil von
$\|X\|$ liefern:
\[ \pi_k: NX_k \times |\Delta^k|
  \inj \coprod_{n=0}^k NX_n \times |\Delta^n|
  \surj \|X^{\leq k}\|. \]

\begin{prop}[\cite{Moer}, III.1, \cite{GJ}, I.2.3]
  Sei $X \in \s\Ens$ eine simpliziale Menge. Dann ist
  \shorthandoff{"}
  \[ \begin{tikzcd}
    NX_k \times \del |\Delta^k| \arrow[r, hook] \arrow[d]
    \arrow[dr, phantom, "\ulcorner"]
    & NX_k \times |\Delta^n| \arrow[d, "\pi_k"] \\
    \|X^{\leq k-1}\| \arrow[r, hook]
    & \|X^{\leq k}\|
  \end{tikzcd} \]
  ein Pushout topologischer Räume. Dabei ist die Abbildung links auf
  der $i$-ten Kante $|d_i|: |\Delta^{k-1}| \inj \del |\Delta^k|$
  gegeben durch
  \begin{align*}
    NX_k \times |\Delta^{k-1}| &\to \|X^{\leq k-1}\| \\
    (x, p) &\mapsto \big[ (N_s(d_i^* x), |s|(p)) \big].
  \end{align*}
\end{prop}
\begin{proof}
  Die Definition der Abbildung links ist sinnvoll, da sie auf den
  niederdimensionalen Überschneidungskanten von $|d_i| |\Delta^k|$ und
  $|d_j| |\Delta^k|$ übereinstimmt.
  
  Sowohl der Pushout des Diagramms als auch $\|X^{\leq k}\|$ sind
  Quotienten von $\coprod_{n=0}^k NX_n \times |\Delta^n|$ nach
  gewissen Äquivalenzrelationen. Bezeichne die Einschränkung von
  $\sim_N$ auf $\coprod_{n=0}^k NX_n \times |\Delta^n|$ mit
  $\sim_N^k$. Die erzeugenden Relationen für $\sim_N^k$ sind:
  \[ \big( x, |d_i|(p) \big) \sim \big( N_s(d_i^* x), |s|(p) \big)
  \qquad \text{für } x \in NX_n, n \leq k.
  \]
  Das sind für $x \in NX_n$ im Fall $n \leq k-1$ genau die erzeugenden
  Relationen von $\sim_N^{k-1}$ und für $n = k$ genau die Relationen
  aus der Definition des Pushouts.
\end{proof}

\begin{kor} \label{real-hd}
  Die geometrische Realisierung $|X|$ einer simplizialen Menge $X \in
  \s\Ens$ ist ein CW-Komplex und insbesondere ein Hausdorffraum.
\end{kor}
\begin{proof}
  Die vorangegangene Proposition zeigt, dass es sich um einen
  CW-Komplex handelt. Die Pushouts sind dabei das Ankleben von
  $k$-Zellen $D^k \cong |\Delta^k|$. Konkret zur Hausdorff-Eigenschaft
  von CW-Komplexen: Es reicht zu zeigen, dass für jedes $k$ der
  Teilraum $\|X^{\leq k}\|$ Hausdorffsch ist. Sind darin zwei
  verschiedene Punkte $p$ und $q$ gegeben, so liegt ohne Einschränkung
  $p$ im Inneren einer $k$-Zelle $|\Delta^k|$, denn andernfalls folgt
  die Hausdorff-Eigenschaft induktiv aus der für $\|X^{\leq
    k-1}\|$. Liegt $q$ in derselben Zelle, so können sie dort durch
  offene Mengen getrennt werden. Andernfalls hat $p$ im Inneren seiner
  $k$-Zelle eine abgeschlossene Umgebung, die eine offene Umgebung von
  $p$ enthält und deren Komplement eine zugehörige offene Umgebung für
  $q$ ist.
\end{proof}
\begin{bem} \label{cw-cells}
  Nach dem Korollar kann die geometrische Realisierung einer
  simplizialen Menge disjunkt in ihre Zellen, die Bilder der offenen
  Inneren ihrer nichtdegenerierten Simplizes, zerlegt werden. Wir
  bezeichnen die zu einem nichtdegenerierten Simplex $\sigma$ gehörige
  Zelle der geometrischen Realisierung mit $|\sigma|$.
\end{bem}

\section{Exaktheitseigenschaften der geometrischen Realisierung}

Die geometrische Realisierungen simplizialer Mengen liegt in einer in
ihren kategoriellen Eigenschaften bequemen (engl. \emph{convenient})
Kategorie topologischer Räume, den kompakt erzeugten
Hausdorffräumen. Dies ermöglicht es uns, neben dem Vertauschen der
geometrischen Realisierung mit Kolimites (\ref{real-cocont}) auch das
Vertauschen mit endlichen Limites zu zeigen.

\begin{defn}[\cite{Steenrod}] \label{def:cg}
  Ein topologischer Raum $X$ heißt \emph{kompakt erzeugt}, falls gilt:
  eine Teilmenge $A \subset X$ ist abgeschlossen, falls $A \cap K$ in
  $K$ abgeschlossen ist für jedes Kompaktum $K \subset X$.
\end{defn}
\begin{bem}
  Äquivalent dazu ist: eine Teilmenge $U \subset X$ ist offen, falls
  $U \cap K$ in $K$ offen ist für jedes Kompaktum $K \subset X$.
\end{bem}
Wir notieren die volle Unterkategorie der kompakt erzeugten
topologischen Räume in den topologischen Räumen mit $\CG$ und der
kompakt erzeugten Hausdorffräume mit $\CGHaus$. Die kompakt erzeugten
topologischen Räume umfassen eine sehr große Klasse an relevanten
topologischen Räumen, etwa CW-Komplexe (nach dem nachfolgenden Lemma
\ref{cg-crit}) oder erstabzählbare Räume (\cite{Steenrod}, 2.2).

Für uns relevant sind die folgenden Kriterien:
\begin{lemma} \label{cg-crit}
  \begin{enumerate}[label=(\roman*)]
    \item \label{itm:cg-crit-lc} Ist $X$ ein lokal kompakter
      topologischer Raum, so ist $X$ kompakt erzeugt.
    \item \label{itm:cg-crit-quot} Ist $p: X \surj Y$ eine
      Quotientenabbildung und $X$ kompakt erzeugt, so ist auch $Y$
      kompakt erzeugt.
     \item \label{itm:cg-crit-cw} Ist $X$ ein CW-Komplex, so ist $X$
       kompakt erzeugt.
  \end{enumerate}
\end{lemma}
Dabei heißt ein topologischer Raum \emph{lokal kompakt} (im schwachen
Sinne), falls jeder Punkt eine kompakte Umgebung besitzt. Beachte den
Unterschied zu \ref{def:loc-compact} und Bemerkung
\ref{loc-compact-usage}.
\begin{proof}
  % TODO: cg-Beweis falsch!
  \begin{enumerate}[label=(\roman*)]
    \item \label{itm:cg-crit-proof-lc} Sei $U \subset X$ mit $U \cap
      K$ offen für alle $K \subset X$ kompakt. Mit der
      Lokalkompaktheit von $X$ wählen wir zu jedem $x \in X$ eine
      kompakte Umgebung $K_x$ und erhalten, dass $U = \bigcup_{x \in
        X} U \cap K_x$ offen ist als Vereinigung offener Mengen.
    \item \label{itm:cg-crit-proof-quot} Sei $A \subset Y$ mit $A \cap
      K$ abgeschlossen für alle $K \subset Y$ kompakt. Mit der
      Finaltopologie auf $Y$ gilt, dass $A \subset Y$ genau dann
      abgeschlossen ist, wenn $p^{-1}(A) \subset X$ abgeschlossen
      ist. Sei nun $\tilde{K} \subset X$ kompakt. Es ist $p^{-1}(A)
      \cap \tilde{K}$ abgeschlossen, denn $p(p^{-1}(A) \cap \tilde{K})
      = p(\tilde{K}) \cap A$ ist abgeschlossen nach Voraussetzung
      ($p(\tilde{K}) \subset Y$ ist kompakt als stetiges Bild eines
      Kompaktums). Da $X$ kompakt erzeugt ist, folgt nun, dass
      $p^{-1}(A)$ abgeschlossen ist und somit auch $A \subset Y$.
    \item Die $n$-Bälle $D^n$ und $(n-1)$-Sphären $S^{n-1}$ sind
      kompakt erzeugt nach \ref{itm:cg-crit-proof-lc}. Disjunkte
      Vereinigungen kompakt erzeugter Räume sind kompakt
      erzeugt. Quotienten kompakt erzeugter Räume sind kompakt erzeugt
      nach \ref{itm:cg-crit-proof-quot}. Da kompakte Teilmengen von
      CW-Komplexen nur endlich viele offene Zellen treffen, ist auch
      die Vereinigung über alle $n$-Skelette kompakt erzeugt.
  \end{enumerate}
\end{proof}

Mit diesen Kriterien folgt sofort unser Ziel.
\begin{kor}
  Die geometrische Realisierung $|X|$ einer simplizialen Menge $X \in
  \s\Ens$ ist ein kompakt erzeugter Hausdorffraum.
\end{kor}
\begin{proof}
  Es handelt sich um einen Hausdorffraum nach \ref{real-hd}. Nach
  \ref{cg-crit} \ref{itm:cg-crit-lc} ist $\coprod_n X_n \times
  |\Delta^n|$ kompakt erzeugt und mit \ref{cg-crit}
  \ref{itm:cg-crit-quot} auch $|X|$. Das folgt alternativ aus
  \ref{real-hd} und dem Kriterium für CW-Komplexe \ref{cg-crit}
  \ref{itm:cg-crit-cw}.
\end{proof}

Der entscheidende Grund, in der Kategorie $\CGHaus$ statt in $\Top$ zu
arbeiten, ist die Existenz eines internen Hom.
\begin{theorem}[\cite{Gabriel-Zisman}, III, 2.1.2]
  \label{cghaus-cart-closed}
  Die Kategorie $\CGHaus$ der kompakt erzeugten Hausdorffräume ist
  kartesisch abgeschlossen.
\end{theorem}
\begin{proof}[Ohne Beweis.] \end{proof}

Während wir die Adjunktion $(\times Y, Y \iHom)$ selbst nicht
benötigen, ist die entscheidende Folge die Rechtsexaktheit von
Produkten in $\CGHaus$.
\begin{satz}[\cite{Gabriel-Zisman}, III, 3] \label{real-products}
  Die geometrische Realisierung $|\cdot|: \s\Ens \to \CGHaus$
  vertauscht mit endlichen Limites.
\end{satz}
\begin{bem}
   Entscheidend ist, dass das Produkt in $\Top$ zweier kompakt
   erzeugter Hausdorffräume im Allgemeinen nicht wieder kompakt
   erzeugt ist. Das korrekte Produkt in $\CGHaus$ heißt auch
   \emph{Kelley-Produkt} und wird $X \times_{Ke} Y$ notiert. Man
   erhält es durch Anwenden des Rechtsadjungierten der Inklusion $\CG
   \to \Top$ auf das Produkt in $\Top$. Dieser Rechtsadjungierte $k:
   \Top \to \CG$ verfeinert die Topologie eines Raumes $X$ um alle
   Mengen $U \subset X$, deren Schnitte mit allen Kompakta $K \subset
   X$ in $K$ offen sind, also genau um die für kompakte Erzeugtheit
   benötigten. Der Satz besagt also:
   \[ |X \times Y| \iso k(|X| \times |Y|). \]
\end{bem}
\begin{proof}[Beweisskizze](\cite{Gabriel-Zisman}, III, 3)
   Ganz allgemein lassen sich endliche Limites als Egalisatoren
   endlicher Produkte darstellen. Für die Egalisatoren verweisen auf
   \cite{Gabriel-Zisman}, III, 3.3. Für das Vertauschen mit endlichen
   Produkten zeigt man, dass die Aussage für Standardsimplizes gilt,
   es also einen Homöomorphismus $|\Delta^n \times \Delta^m| \iso
   |\Delta^n| \times |\Delta^m|$ gibt, siehe \cite{Gabriel-Zisman},
   III, 3.4. Dann folgt die Aussage sofort aus dem Vertauschen des
   Produkts in $\CGHaus$ mit Kolimites als linksadjungierter Funktor
   des internen Hom in $\CGHaus$ (\ref{cghaus-cart-closed}):
   \begin{align*}
     |X \times Y|
     &\iso |\col_{\slicecat{\Delta}{r}{X}} \Delta^n \times
     \col_{\slicecat{\Delta}{r}{Y}} \Delta^m| \\
     &\iso \col_{\slicecat{\Delta}{r}{X}} \col_{\slicecat{\Delta}{r}{Y}}
     |\Delta^n \times \Delta^m| \\
     &\iso \col_{\slicecat{\Delta}{r}{X}} \col_{\slicecat{\Delta}{r}{Y}}
     (|\Delta^n| \times_{Ke} |\Delta^m|) \\
     &\iso |\col_{\slicecat{\Delta}{r}{X}} \Delta^n|
     \times_{Ke} |\col_{\slicecat{\Delta}{r}{Y}} \Delta^m|) \\
     &\iso |X| \times_{Ke} |Y|.
   \end{align*}
\end{proof}
\begin{bsp}[\cite{Engelking}, 3.3.29] \label{ex:cg-products}
  Ein Produkt in $\Top$ zweier kompakt erzeugter Hausdorff-Räume ist
  im Allgemeinen nicht wieder kompakt erzeugt. Ein Beispiel ist das
  Produkt $X \times Y$ mit $X = \R \setminus \{1, \frac{1}{2},
  \frac{1}{3}, \cdots \}$ mit der Teilraumtopologie und $Y$ einem
  unendlichen Bouquet von Kreisen mit der Quotiententopologie von $\R
  \surj \R/\N = Y$.
\end{bsp}

\chapter{Koenden}
\label{ch:coends}

\section{Geometrische Realisierung als Koende}

% TODO stimmt der Ausblick?
Die Sprache der Enden und Koenden ermöglicht uns eine allgemeinere
Sicht auf die geometrische Realisierung und wird sich später als
nützlich erweisen, um andere Formen der geometrischen Realisierung
einzuführen. Wir führen Koenden und ihre Eigenschaften ein, Enden sind
dazu formal dual. Die Darstellung folgt \cite{Lore}.
\begin{defn}[\cite{Lore}, 1.1 f.]
  Sei $F: C\op \times C \to D$ ein Funktor. Ein Objekt $K \in D$ mit
  Morphismen $\iota_c: F(c, c) \to K$ für alle $c \in C$ heißt
  \emph{Kokeil} für $F$, falls für alle Morphismen $f: c \to d$ in $C$
  das folgende Diagramm kommutiert:
  \[ \begin{tikzcd}
    F(d, c) \arrow{r}{F(f, \id)} \arrow{d}{F(\id, f)}
    & F(c, c) \arrow{d}{\iota_c} \\
    F(d, d) \arrow{r}{\iota_d} & K
  \end{tikzcd} \]
  Die Kokeile für $F$ bilden eine Kategorie (Morphismen verträglich
  mit den $\iota_c$). Ein initiales Objekt in der Kategorie der
  Kokeile für $F$, d.~h. ein universeller Kokeil, heißt das
  \emph{Koende} von $F$.
\end{defn}
Wie andere universelle Objekte müssen Koenden in einer beliebigen
Kategorie $D$ nicht existieren, sind in diesem Fall aber eindeutig bis
auf eindeutigen Isomorphismus.

Formal dual dazu ist ein \emph{Keil} für einen Funktor $F: C\op \times
C \to D$ ein Kokeil für den Funktor $F\op \circ \tau$ mit dem
opponierten Funktor $F\op: C \times C\op \to D\op$ und der
Vertauschung $\tau: C\op \times C \iso C \times C\op$, und ein
\emph{Ende} ein universeller Keil für $F$.

Enden und Koenden werden als Integrale notiert, eine Konvention, die
sich später aus analogen Umformungseigenschaften erklärt
(vgl. \ref{coend-fubini}, \ref{coend-density}):
\begin{alignat*}{2}
  \int^C F &= \int^{c \in C} F(c, c)
  \quad &&\text{für das Koende von } F: C\op \times C \to D, \\
  \int_C F &= \int_{c \in C} F(c, c)
  && \text{für das Ende von } F: C\op \times C \to D.
\end{alignat*}

Koenden lassen sich als Koegalisatoren von Koprodukten darstellen:
\begin{lemma}[\cite{Lore}, 1.14] \label{coend-coeq}
  Sei $F: C\op \times C \to D$ ein Funktor. Dann ist das folgende
  Diagramm ein Koegalisator:
  \[ \coprod_{f: c \to d} F(d, c)
  \overset{F(f, \id)}{\underset{F(\id, f)}{\rightrightarrows}}
  \coprod_{c \in C} F(c, c) \to \int^C F. \]
\end{lemma}
\begin{proof}
  Der Morphismus in das Koende ist von den $\iota_c: F(c, c) \to K$
  induziert, die Morphismen des Koegalisators durch die angegebenen
  Morphismen auf den Komponenten $F(d, c) \xrightarrow{F(f, \id)} F(c,
  c)$ und $F(d, c) \xrightarrow{F(\id, f)} F(d, d)$. Die universellen
  Eigenschaften, die den Koegalisator und das Koende definieren, sind
  dann identisch.
\end{proof}

Sind $F: C\op \to D$ und $G: C \to D$ Funktoren und ist $(D, \otimes)$
eine monoidale Kategorie (Schmelzkategorie mit universellen
Verschmelzungen), so definieren sie einen Funktor
\begin{alignat*}{4}
  C\op \times C &\to D \times D &&\to D, \\
  (a, b) &\mapsto (Fa, Gb) &&\mapsto Fa \otimes Gb.
\end{alignat*}
Das Koende über diesen Funktor heißt das \emph{Tensorprodukt} $F
\otimes G$ von $F$ und $G$.

Wir erinnern an die Darstellung der geometrischen Realisierung mit
Koegalisator und Koprodukt:
\[ |X| \iso \bigg( \coprod_n X_n \times |\Delta^n| \bigg) \big/ \sim \]
mit dem Quotienten nach der von
\[ (x, |f|(p)) \sim (f^* x, p) \]
für monotones $f: [m] \to [n]$ erzeugten Äquivalenzrelation. Das ist
gerade der Koegalisator
 \[ \coprod_{f: [n] \to [m]} X_n \times |\Delta^m|
 \overset{f^* \times \id}{\underset{\id \times
     |f|}{\rightrightarrows}} \coprod_{[n]} X_n \times |\Delta^n| \to
 |X| \] aus \ref{coend-coeq} und mithin, falls $\Top$ mit der
 kartesischen Schmelzstruktur durch Produkte versehen ist, das
 Tensorprodukt der Funktoren
\begin{alignat*}{4}
  X: &\Delta\op \to &&\Ens \to &&\Top \qquad &&\text{und} \\
  |\Delta|: &\Delta &&\to &&\Top, && [n] \mapsto |\Delta^n|,
\end{alignat*}
wobei die Mengen $X_n$ als diskrete topologische Räume aufgefasst
werden (\cite{Moer}, III.1):
\[ |X| = X \otimes |\Delta|. \]

\begin{bem} \label{coend-correct-real}
  % TODO Koende vs Simplexkategorie
  Rückblickend halten wir fest, dass während unsere durch die
  ``Kostetigkeitseigenschaft'' für die Simplexkategorie
  $\slicecat{\Delta}{r}{X}$ (Gl. \ref{eq:real-cocont},
  \ref{eq:real-colim}) definierte geometrische Realisierung in dieser
  Situation elegant ist, sie auf einer konkreten Eigenschaft der
  Situation simplizialer \emph{Mengen} beruht, die wir bei
  allgemeineren simplizialen Objekten nicht mehr gegeben
  haben. Konkret werden wir im nächsten Abschnitt einen gewissen
  Begriff einer Wirkung einer Kategorie auf einer anderen Kategorie
  erklären (Koexponentiale, siehe \ref{def:copower}). Die Besonderheit
  simplizialer Mengen beruht nun darauf, dass sich die Wirkung von
  $\Ens$ auf $\Top$ $(X_n, |\Delta^n|) \mapsto \coprod_{X_n}
  |\Delta^n|$ als von der Wirkung von $\Ens$ auf $\s\Ens$, $(X_n,
  \Delta^n) \mapsto \coprod_{X_n} \Delta^n \cong \set{\Delta^n
    \xrightarrow{x} X}{x \in X_n}$ induziert darstellen lässt, was uns
  zum Begriff der Simplexkategorie von $X$ geführt hat. Bei Wirkungen
  wie von $\Top$ auf $\Top$ durch das kartesische Produkt wird es
  nicht mehr möglich sein, die $\Delta^n \to X$ aus der
  Simplexkategorie als topologischen Raum aufzufassen. Unsere
  Beschreibung der geometrischen Realisierung als Koende ist also die
  für allgemeinere Kontexte richtige Beschreibung.
\end{bem}
\begin{bem} \label{real-model-natural}
  Da eine Transformation $R \Trafo \overline{R}$ einen Morphismus der
  Koenden $R \otimes X \to \overline{R} \otimes X$ induziert, erhalten
  wir aus unserem Morphismus kosimplizialer Räume $|\Delta| \to
  \blacktriangle$ stetige Abbildungen zwischen den geometrischen
  Realisierungen $|X| \to \blacktriangle |X|$.
\end{bem}

\section{Der Koendenkalkül}
\label{sec:coend-calc}

Die Sprache der Enden und Koenden besitzt eine Reihe an
Verträglichkeits- und Umformungseigenschaften, die sie zu einem
mächtigen Werkzeug für eine Vielzahl formaler Rechnungen in
Anwendungen der Kategorientheorie machen (für Beispiele siehe
\cite{Lore}). Im folgenden werden einige Umformungsregeln dieses
Kalküls \footnote{Bei der Übersetzung aus dem Englischen geht leider
  die Analogie zu den Regeln der Differentiations- und
  Integrationstheorie verloren.}  zusammengestellt.

\begin{lemma}[Funktorialität, \cite{Lore}, 1.9]
  Sind $F \xRightarrow{\eta} G \xRightarrow{\tau} H$ Transformationen
  von Funktoren $F, G, H: C\op \times C \to D$, deren Koenden
  existieren, so sind die auf den Koenden induzierten Morphismen
  \[ \int (\tau \circ \eta), \int \tau \circ \int \eta:
  \int^c F(c, c) \to \int^c H(c, c) \]
  verträglich: $\int (\tau \circ \eta) = \int \tau \circ \int \eta$.
\end{lemma}
\begin{proof}
  Dies folgt sofort aus der Eindeutigkeit dieses Morphismus in der
  universellen Definition von Koenden.
\end{proof}

Mit der Beschreibung von Koenden als Koegalisatoren von Koprodukten
\ref{coend-coeq} ist klar, dass Koenden Kolimites über eine geeignete
Kategorie sind. Wir machen diese Aussage präzise:
\begin{defn} \label{def:sub}
  Sei $C$ eine Kategorie. Die \emph{Unterteilungskategorie}
  (engl. \emph{subdivision category}) $\Sub(C)$ von $C$ besteht aus
  Objekten $c^\S$ und $f^\S$ für alle Objekte $c \in C$ und Morphismen
  $f: c \to d$ in $C$. Die Morphismen von $\Sub(C)$ sind die
  Identitäten sowie für $f: c \to d$ in $C$ die Pfeile
  \[ c^\S \from f^\S \to d^\S. \]
\end{defn}
\begin{prop}[\cite{ML}, IX.5.1, \cite{Lore}, 1.13] \label{coend-col}
  Es gibt einen Funktor $[C\op \times C, D] \to [\Sub(C), D], F
  \mapsto \widehat{F}$, der eine Äquivalenz von Kategorien zwischen
  der Kategorie der Kokeile für $F$ und der Kategorie der Kokegel für
  $\widehat{F}$ induziert. Insbesondere gilt
  \[ \int^{c \in C} F(c, c) \iso \col \widehat{F}. \]
\end{prop}
\begin{proof}
  Wir erhalten $\widehat{F}$ durch die folgenden Zuordnungen für $f: c \to
  d$ einen Morphismus in $C$ und $c, d$ Objekte in $C$:
  \[ \begin{tikzcd}
    \Sub(C) \arrow{d}
    & c^\S \arrow[mapsto]{d}
    & \arrow{l} f^\S \arrow[mapsto]{d} \arrow{r}
    & d^\S \arrow[mapsto]{d} \\
    D
    & F(c, c)
    & \arrow{l}{F(f, \id)} F(d, c) \arrow{r}{F(\id, f)}
    & F(d, d).
  \end{tikzcd} \]
  Diese Zuordnung $F \mapsto \widehat{F}$ ist funktoriell:
  Transformationen $F \Trafo G$ induzieren Transformationen
  $\widehat{F} \Trafo \widehat{G}$. Kokeile für $F$ und Kokegel für
  $\widehat{F}$ bestehen nun beide aus einem Objekt $K$ mit Morphismen
  $\iota_c: F(c, c) \to K$ für $c \in C$ und $\iota_f: F(d, c) \to K$
  für $f: c \to d$, sodass die drei Morphismen $F(d, c) \to K$
  übereinstimmen:
  \[ \iota_f = \iota_c \circ F(f, \id) = \iota_d \circ F(\id, f). \]
  Ein Morphismus von Kokeilen für $F$ und von Kokegeln für
  $\widehat{F}$ ist jeweils ein mit den angegebenen Inklusionen
  $\iota_c, \iota_f$ verträglicher Morphismus der Objekte $K \to
  K'$. Koenden für $F$ und Kolimites für $\widehat{F}$ sind die
  initialen Objekte der Kategorien von Kokeilen für $F$ bzw. Kokegeln
  für $\widehat{F}$.
\end{proof}
\begin{bem}[\cite{Lore}, 1.12]
  Eine andere Beschreibung verwendet statt der Unterteilungskategorie
  $\Sub(C)$ die verdrehte Pfeilkategorie $\TW(C)$ von $C$, deren
  Objekte Morphismen $f: c \to c'$ in $C$ und Morphismen zwischen $f:
  c \to c'$ und $g: d \to g'$ kommutative Quadrate
  \[ \begin{tikzcd}
    c \arrow{d}{f} \arrow{r}{h} & d \arrow{d}{g} \\
    c' & \arrow{l}{k} d'.
  \end{tikzcd} \]
  Wir erhalten eine Äquivalenz der Kategorien von Kokegeln über
  Funktoren $F: \TW(C) \to D$ bzw. über Funktoren $G: \Sub(C) \to D$:
  beide bestehen aus Morphismen $\id_c \to K$ bzw. $c^\S \to K$, die
  mit $f \to \id_c, f \to \id_{c'}$ bzw. $f^\S \to c^\S, f^\S \to
  c'^\S$ kompatibel sein sollen. Die weiteren Kompatibilitäten für
  einen Kokegel über $F: \TW(C) \to D$, die von $f \to g$ gefordert
  werden, sind bereits automatisch erfüllt, denn mit den Bezeichnungen
  wie im Diagramm gilt etwa, dass die Kompitibilität $(f \to g \to
  \id_d \to K) = (f \to id_{c'} \to K)$ diejenige zu $k \circ g: d \to
  c'$ ist.

  Insgesamt fordert der Morphismus $f \to g$ in $\TW(C)$
  Kompatibiltäten für die Inklusionen von $\id_c, \id_d, \id_{d'}$ und
  $\id_{c'}$ nach $K$. Diese entsprechen jeweils Kompatibilitäten zu
  den Kompositionen $g \circ h, k \circ g$ und $k \circ g \circ h$ im
  obigen Diagramm.

  Der Funktor $[C\op \times C, D] \to [\TW(C), D]$ ordnet dann einem
  Funktor $F$ den Funktor
  \begin{align*}
    (f: c \to d) &\mapsto F(d, c)), \\
    (f \to g) &\mapsto F(h, k)
  \end{align*}
  mit Vorschalten von $h$ und Nachschalten von $k$ für einen
  Morphismus $f \to g$ wie im obigen Diagramm zu.
\end{bem}

\begin{defn}
  Sei $F: C \to D$ ein Funktor. $F$ heißt \emph{stetig}, falls er mit
  Limites über kleine Kategorien vertauscht. $F$ heißt
  \emph{kostetig}, falls er mit Kolimites über kleine Kategorien
  vertauscht.
\end{defn}
\begin{kor}[Kostetigkeit von Koenden, \cite{Lore}, 1.16]
  \label{coend-cocont}
  Ist $F: D \to E$ ein kostetiger Funktor und $T: C\op \times C \to D$
  ein Funktor, dann ist der natürliche Morphismus
  \[ F \int^c T(c, c) \iso \int^c F \circ T(c, c), \]
  ein Isomorphismus, wann immer eines der beiden Koenden existiert.
\end{kor}
\begin{proof}
  Dies folgt wegen $\widehat{F \circ T} = F \circ \widehat{T}$ aus der
  Beschreibung von Koenden als Kolimites \ref{coend-col}.
\end{proof}
\begin{bem}
  Das wichtigste Beispiel für diesen Fall ist der $\Hom$-Funktor. Nach
  Definition von Limes und Kolimes sind $D(d, \cdot): D \to \Ens$ und
  $D(\cdot, d): D\op \to \Ens$ stetig. Wir erhalten für $F: C\op
  \times C \to D$ die Formeln:
  \begin{align*}
    D \left( d, \int_c F(c, c) \right) & \iso \int_c D \left( d, F(c, c) \right) \\
    D \left( \int^c F(c, c), d \right) &\iso \int_c D \left( F(c, c), d \right) .
  \end{align*}
\end{bem}

\begin{lemma}[Fubini, \cite{Lore}, 1.9, \cite{ML}, IX.8]
  \label{coend-fubini}
  Sei $F: C\op \times C \times D\op \times D \to E$ ein Funktor, für
  den die Koenden $\int^c F(c, c, d, d')$ für alle $d, d' \in D$
  existieren.

  Dann ist
  \[ \int^{c \in C} F(c, c, \cdot, -): D\op \times D \to E \]
  ein Funktor und es gilt
  \[ \int^{d \in D} \int^{c \in C} F(c, c, d, d)
  \iso \int^{(c, d) \in C \times D} F(c, c, d, d),
  \]
  falls eines der beiden Koenden existiert, wobei rechts $F$ als
  Funktor $F: (C \times D)\op \times (C \times D)$ aufgefasst wird.
\end{lemma}
\begin{bem}
  Formal fließt in die Aussage der \emph{Parameter-Satz} ein, der
  besagt, dass Koenden mit der Adjunktion $[C\op \times C \times D, E]
  \iso {[C\op \times C, [D, E]]}$ verträglich sind, also Koenden in
  Funktorkategorien objektweise berechnet werden können (\cite{ML},
  IX.7). Dies folgt sofort aus der Darstellung von Koenden als
  Kolimites \ref{coend-col}.
\end{bem}
\begin{proof}
  Sei $K: D\op \times D \to E$ ein Kokeil für $F: C\op \times C \to
  [D\op \times D, E]$ in der Funktorkategorie $D\op \times D \to E$
  und $L(K)$ ein Kokeil für $K$. Auch solche iterierten Kokeile $L(K)$
  bestehen aus Morphismen $F(c, c, d, d) \to L(K)$ für alle Objekte
  $c$ von $C$ und $d$ von $D$ als Komposition von $F(c, c, \cdot, -)
  \Trafo K$ ausgewertet auf $(d, d) \in D\op \times D$ mit $K(d, d)
  \to L(K)$. Sie erfüllen die Kommutativitätseigenschaft von
  Kokeil-Quadraten für alle Morphismen der Form $(f, \id_d)$ in $C
  \times D$ (die Transformation aus der Kokeil-Eigenschaft von $K$
  ausgewertet in $(d, d) \in D\op \times D$) sowie $(\id_c, g)$ in $C
  \times D$ (durch Vorschalten der zur Transformation $F(c, c, \cdot,
  -) \Trafo K$ gehörigen Morphismen vor das Kokeil-Quadrat von
  $L(K)$).

  Nach denselben Argumenten definiert ein Kokeil $M$ für $F: (C \times
  D)\op \times (C \times D)$ einen iterierten Kokeil: Mit der
  Unterteilungskategorie können wir einen iterierten Kokeil
  ``sparsam'' angeben, indem wir die inneren Kokeile nicht für alle
  $(d, d') \in D\op \times D$, sondern nur für Diagonalelemente $(d,
  d) \in D\op \times D$ sowie Morphismenobjekte $(d', d) \in D\op
  \times D$ für einen Morphismus $f: d \to d'$ angeben. Der iterierte
  Kokeil ist dadurch nach \ref{coend-col} vollständig festgelegt. Nun
  ist $M$ zunächst wegen der Kommutativität von
  \[ \begin{tikzcd}
    F(c', c, d, d) \arrow{r} \arrow{d} & F(c, c, d, d) \arrow{d} \\
    F(c', c', d, d) \arrow{r} & M
  \end{tikzcd} \]
  ein $(d, d)$-Kokeil und dann durch Setzen der Inklusionen $F(c, c,
  d', d) \to M$ als Komposition
  \[ (F(c, c, d', d) \to F(c, c, d', d') \to M)
  \: = \: (F(c, c, d', d) \to F(c, c, d, d) \to M)
  \]
  wegen der Kommutativität von
  \[ \begin{tikzcd}
    F(c', c, d', d) \arrow{rr} \arrow{dd} & & F(c, c, d', d) \arrow{d} \\
    & & F(c, c, d, d) \arrow{d} \\
    F(c', c', d', d) \arrow{r} & F(c', c', d', d') \arrow{r} & M
  \end{tikzcd} \]
  auch ein $(d', d)$-Morphismenkokeil. Klarerweise ist dann auch $M$
  ein iterierter Kokeil über sich selbst als $(d, d)$- und $(d',
  d)$-Kokeil.

  Morphismen von Kokeilen entsprechen nun Morphismen iterierter
  Kokeile und damit entsprechen sich auch Koenden alias die initialen
  Objekte der beiden Kategorien.
\end{proof}
 Ein konzeptionellerer Beweis benutzt die Darstellung von Koenden als
 Kolimites aus \ref{coend-col}.
\begin{proof}[Alternativer Beweis]
  Der Isomorphismus von Kategorien $\TW(C \times D) \iso \TW(C) \times
  \TW(D)$ ist verträglich mit dem Funktor $F \to \widehat{F}$ aus
  \ref{coend-col}. Es kommutiert
  \[ \begin{tikzcd}
    {[(C \times D)\op \times (C \times D), E]}
    \arrow{d}{\approx} \arrow{r}{F \mapsto \widehat{F}}
    & {[\TW(C \times D), E]} \arrow{d}{\approx} \\
    {[C\op \times C, [D\op \times D, E]]} \arrow{r}
    & {[\TW(C), [\TW(D), E]]},
  \end{tikzcd}
  \]
  wobei der untere Funktor gegeben ist durch
  \[ [C\op \times C, [D\op \times D, E]]
  \to [\TW(C), [D\op, \times D, E]] \to [\TW(C), [\TW(D), E]].
  \]
  Die Darstellung iterierter Koenden als Produkt-Koenden folgt dann
  direkt aus der Darstellung iterierter Kolimites als
  Produkt-Kolimites:
  \[ \col_{I \times J} F \iso \col_J \col_I \tilde{F}, \]
  falls $F \mapsto \tilde{F}$ unter dem Exponentialgesetz $[I \times
    J, C] \qiso {[I, [J, C]]}$.
\end{proof}

Koenden und Enden treten in kategorientheoretischen Rechnungen häufig
natürlich auf. Das liegt an der folgenden Beschreibung von
Transformationsmengen als Enden.
\begin{lemma}[Transformationen als Ende, \cite{Lore}, 1.18]
  \label{trans-end}
  Seien $F, G: C \to D$ zwei Funktoren. Dann gibt es einen natürlichen
  Isomorphismus
  \[ [C, D](F, G) \iso \int_c D(Fc, Gc). \]
\end{lemma}
\begin{proof}
  Transformationen $F \Trafo G$ sind genau diejenigen Tupel aus
  $\prod_c D(Fc, Gc)$, für die für jedes $f: c \to d$ in $C$ die
  Bilder rechts unten im Diagramm übereinstimmen:
  \[ \begin{tikzcd}
    & D(Fc, Gc) \arrow{d}{Gf \circ} \\
    D(Fd, Gd) \arrow{r}{\circ Ff} & D(Fc, Gd)
  \end{tikzcd}. \]
  Damit ist $[C, D](F, G)$ der Egalisator aus der Dualisierung von
  \ref{coend-coeq} und folglich das angegebene Ende.
\end{proof}

Neben dem Fubini-Satz für Enden gibt es eine weitere bemerkenswerte
Analogie zu Interalen. Aus der Integrationstheorie ist die Formel
\[ \int_X f \, d\delta_x = f(x) \]
für $\delta_x$ das Diracmaß zum Punkt $x \in X$ bekannt. Im
Koendenkalkül kommt der Yoneda-Einbettung die Rolle des Diracmaßes zu:
\begin{prop}[Dichteformel, \cite{Lore}, 2.1] \label{coend-density}
  Seien $F: C \to \Ens$ und $G: C\op \to \Ens$ Funktoren. Dann gibt es
  eine Isotransformation von Funktoren $C \to \Ens$
  \[ F \Isotrafo \int^c F(c) \times C(c, \cdot) \]
  sowie von Funktoren $C\op \to \Ens$
  \[ G \Isotrafo \int^c G(c) \times C(\cdot, c). \]
\end{prop}
\begin{bem}
  Die Aussage trägt in \cite{Lore}, 2.1, den sehr treffenden Namen
  \emph{Ninja Yoneda-Lemma}.
\end{bem}
\begin{proof}
  Dies folgt aus dem Yoneda-Lemma und unseren schon bekannten
  Rechenregeln. Wir zeigen die erste Aussage. Seien dazu $F, G: C \to
  \Ens$ Funktoren, dann gilt:
  \begin{align*}
    &[C, \Ens](\int^c F(c) \times C(c, \cdot), G) \\
    \iso[\ref{trans-end}] \quad
    &\int_d \Ens(\int^c F(c) \times C(c, d), Gd) \\
    \iso[\ref{coend-cocont}] \quad
    &\int_d \int_c \Ens(F(c) \times C(c, d), Gd) \\
    \iso[\ref{coend-fubini}] \quad
    &\int_c \int_d \Ens(F(c) \times C(c, d), Gd) \\
    \iso[\text{int. Hom}] \quad
    &\int_c \int_d \Ens(C(c, d), Fc \iHom Gd) \\
    \iso[\ref{trans-end}] \quad
    &\int_c [C, \Ens](\Ens(C(c, \cdot), Fc \iHom G \cdot) \\
    \iso[\text{Yon.}] \quad
    &\int_c (Fc \iHom Gc) \\
    \iso \quad &\int_c \Ens(Fc, Gc) \\
    \iso[\ref{trans-end}] \quad
    &[C, \Ens](F, G),
  \end{align*}
  % TODO left / right setzen
  
  was mit dem Yoneda-Lemma für Funktorkategorien die Aussage zeigt.
\end{proof}
\begin{bem}
  Wie weit die Analogie zwischen Integralen und (Ko-) Enden reicht,
  ist mir nicht bekannt. Sie ist vermutlich neben den analogen
  Eigenschaften (Fubini, Dichteformel) durch die Konstruktion von
  Koenden als direkte Summen von Produkten zweier Objekte (analog zu
  Riemann- bzw. Lebesguesummen in der Maßtheorie)
  inspiriert
  \footnote{Vergleiche hierzu die Diskussion in
    \url{https://mathoverflow.net/questions/239326/why-do-we-denote-coends-with-integral-notation-beyond-fubinis-theorem}.}.
  Die Frage ist, inwiefern maßtheoretische Aussagen eine Übersetzung
  in die Sprache der (Ko-) Enden haben. Das folgende bei der Suche
  nach einer solchen Aussage entstandene Beispiel beleuchtet dies zwar
  nicht näher, ist aber eine schöne Anwendung der Dichteformel.
\end{bem}
\begin{bsp}
  Nach der Verträglichkeit des Integrals mit Verwandtschaft
  (\cite{AN3}, 1.5.19) ist die Integralpaarung $(f, \mu) \mapsto \int
  f \, \mu$ auf einem Koende definiert. Bezeichne dazu $\mathcal{M}$
  die Kategorie der Messräume (Mengen mit $\sigma$-Algebra) und $M_X$
  die Menge der Maße auf einem Messraum $X$. Das Integral ist dann
  eine Paarung $M_X \times \mathcal{M}(X, \R) \to \R$ (der Maßraum
  $\R$ links wie üblich versehen mit der Borelalgebra), für die die
  beiden Wirkungen einer messbaren Abbildung $\Phi: X \to Y$ durch
  Vorschalten bzw. Bildmaß übereinstimmen:
  \[ \int (f \circ \Phi) \, \mu = \int f \, \Phi_*(\mu). \]
  Somit ist der Integraloperator definiert auf dem Koende
  \[ \int^{X \in \mathcal{M}} M_X \times \mathcal{M}(X, \R) \iso M_\R \]
  nach der Dichteformel. Dies ist die Aussage, dass es wegen
  \[ \int f \, \mu = \int (\id_\R \circ f) \, \mu = \int \id_R f_*(\mu) \]
  reicht, die Identitätsfunktion auf $\R$ bezüglich allen Maßen auf
  $\R$ integrieren zu können.
\end{bsp}

\subsection{Angereicherte Kategorien}

In der ursprünglichen Definition einer Kategorie tragen die Morphismen
$C(x, y)$ die Struktur einer Menge. Der Wunsch, Begriffe wie ``die
Summe zweier Morphismen'' oder ``der Nullmorphismus'' aus der
Kategorie der $R$-Moduln auch kategorientheoretisch zu erfassen,
führte zum Begriff der additiven Kategorien, bei denen
Morphismenmengen abelsche Gruppen sind und Funktoren
Gruppenhomomorphismen auf den Morphismengruppen induzieren. Dieser
Gedankengang lässt sich auch auf Situationen übertragen, in denen die
Morphismenmengen eine andere natürliche Struktur tragen (etwa die
eines topologischen Raums) oder gar am besten als Objekte einer nicht
notwendigerweise über den Mengen liegenden Kategorie $V$ aufzufassen
sind. Solche Kategorien bezeichnet man als über $V$
\emph{angereicherte} (engl. \emph{enriched}) Kategorien. Wir imitieren
die herkömmliche Definition von Kategorien:
% TODO quelle enriched
\begin{defn}[Angereicherte Kategorie]
  Sei $(V, \otimes)$ eine monoidale Kategorie (Schmelzkategorie mit
  universellen Verschmelzungen). Eine \emph{über $V$ angereicherte
    Kategorie} $C$ ($V$-Kategorie) besteht aus:
  \begin{enumerate}
  \item einer Klasse von Objekten $\Ob(C)$
  \item für jedes Paar von Objekten $(x, y)$ einem Objekt $C(x,y) \in
    V$
  \item einer Komposition $C(x, y) \otimes C(y, z) \to C(x, z)$
  \item für jedes Objekt $x \in \Ob(C)$ einem Morphismus $\id_x: I \to
    C(x, x)$ in $V$ für $I$ die universelle 0-Verschmelzung,
  \end{enumerate}
  sodass die Komposition assoziativ ist (bezüglich des eindeutigen
  Isomorphismus $C(w,x) \otimes (C(x,y) \otimes C(y,z)) \iso (C(w,x)
  \otimes C(x,y)) \otimes C(y,z)$) und verträglich mit den Identitäten
  (bezüglich der eindeutigen Isomorphismen $C(x, y) \otimes I \iso
  C(x, y)$ und $I \otimes C(x,y) \iso C(x,y)$).

  Ein Funktor zwischen $V$-Kategorien $F: C \to D$ ist eine Zuordnung
  auf Objekten $F: c \mapsto Fc$ zusammen mit Morphismen $C(x, y) \to
  D(Fx, Fy)$ in $V$.
\end{defn}
\begin{bsp}
  Eine Kategorie ist eine über $\Ens$ angereicherte Kategorie
  bezüglich der kartesischen monoidalen Struktur auf $\Ens$. Eine
  Kategorie mit additiver Struktur ist eine über $\Ab$ angereicherte
  Kategorie bezüglich des Tensorprodukts auf $\Ab$. Jede monoidale
  Kategorie mit zum Produkt $\otimes$ adjungiertem internen Hom $V$
  ist eine $V$-Kategorie über sich selbst. Solche Kategorien heißen
  \emph{monoidale abgeschlossene Kategorien}.
\end{bsp}

In einer monoidalen abgeschlossenen Kategorie $V$ haben wir die
Adjunktion
\[ V(a \otimes b, c) \iso V(a, V(b, c)) \]
mit $V(b, c) = (b \iHom c)$ dem internen Hom-Objekt. Das Objekt $a
\otimes b$ ist dann ein darstellendes Objekt für den Funktor $c
\mapsto V(a, V(b, c))$ und heißt manchmal auch Koexponential
(engl. \emph{copower}) von $a$ und $b$. Wir verallgemeinern diese
Situationen auf Koexponentiale in angereicherten Kategorien:
\begin{defn} \label{def:copower}
  Sei $C$ eine $V$-Kategorie. Ist $v \odot b \in C$ ein darstellendes
  Objekt für den Funktor $c \mapsto V(v, C(b, c))$ mit $v \in V, b \in
  C$, gilt also
  \[ C(v \odot b, c) \iso V(v, C(b, c)) \]
  natürlich in $b$, $c$ und $v$, so heißt $v \odot b$ das
  Koexponential von $v$ und $b$.
\end{defn}
In diesem Fall heißt die Kategorie $C$ auch \emph{tensoriert über
  $V$}.
\begin{bsp} \label{ens-tensored}
  Jede Kategorie mit beliebigen Koprodukten hat Koexponentiale über
  $\Ens$. Mit
  \[ V \odot B = \coprod_V B \]
  gilt
  \[ C(V \odot B, C) \iso \Ens(V, C(B, C)). \]
\end{bsp}

Wir können nun auch die geometrische Realisierung in der Sprache
angereicherter Kategorien formulieren. Ist $C$ eine $V$-Kategorie mit
Koexponentialen und sind Funktoren
\begin{alignat*}{2}
  R: &\Delta &&\to C \qquad{und} \\
  X: &\Delta\op &&\to V
\end{alignat*}
gegeben, so erklären wir die geometrische Realisierung von $X$ als das
Koende über den Funktor
\begin{align*}
  \Delta\op \times \Delta &\to C, \\
  ([n], [m]) &\mapsto X[n] \odot R[m].
\end{align*}
Der Fall simplizialer Mengen ist $C = \Top$ und $V = \Ens$ mit dem
kanonischem Koexponential.

